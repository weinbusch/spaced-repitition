<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="{{ url_for('static', filename='output.css') }}">

  {% if title %}
  <title>{{ title }} - Juliano</title>
  {% else %}
  <title>Willkommen bei Juliano</title>
  {% endif %}

  <script src="https://cdn.jsdelivr.net/npm/moment@2.24.0/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment-timezone@0.5.27/builds/moment-timezone-with-data.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment@2.24.0/locale/de.js"></script>

</head>

<body class="h-screen antialiased text-gray-800 bg-gray-100">
{% block body %}{% endblock %}
<script>
  var locale = "{{ g.locale or 'en' }}";
  moment.locale(locale);

  var momentObjects = document.querySelectorAll("span[moment-format]");

  for (var i=0, j=momentObjects.length; i<j; i++){
      var obj = momentObjects[i];
      var utcDatetime = obj.textContent;
      if (!utcDatetime.endsWith('Z')) {utcDatetime += 'Z'}
      var datetime = moment(utcDatetime).tz('Europe/Berlin');
      var format = obj.getAttribute('moment-format');
      if (format=='fromNow'){
          obj.textContent = datetime.fromNow();
      } else {
          obj.textContent = datetime.format(format);
      }
  }
</script>

</body>

</html>
