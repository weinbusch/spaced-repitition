{% extends "layout.html" %}
{% from "_forms.html" import render_form %}

{% block main %}
{% if items %}
<div class="flex flex-col items-center py-8">
  {% if todo_items %}
  <a href="{{ url_for('train') }}"
     class="px-10 py-4 bg-yellow-600 hover:bg-yellow-700 rounded-full text-white cursor-pointer">
    <div class="flex flex-col items-center">
      <p class="text-2xl leading-tight">
        Übung beginnen
      </p>
      <p class="text-sm leading-tight">
        {% set count = todo_items | length %}
        {% if count == 1 %}
        <span>{{ count }}</span> anstehende Übung.
        {% else %}
        <span>{{ count }}</span> anstehende Übungen.
        {% endif %}
      </p>
    </div>
  </a>
  <div class="mt-16">
    <p class="text-center text-gray-600 italic">
      - oder -
    </p>
  </div>
  {% else %}
  <div class="inline-block px-10 py-4 border border-yellow-600 text-yellow-600 rounded-full">
    <p class="text-sm font-semibold leading-tight">
      Heute stehen keine Übungen an.
    </p>
  </div>
  {% endif %}
</div>
{% endif %}

<div class="mt-8">
  {% if not items %}
  <h1 class="text-center text-2xl font-semibold leading tight text-yellow-700">
    Herzlich Willkommen
  </h1>
  <p class="mt-2 text-center leading-tight">
    Du scheinst neu hier zu sein.
  </p>
  <p class="mt-2 text-center leading-tight">
    Fange mit Juliano an, indem Du ein neues Wort zu Deiner Liste hinzufügst:
  </p>
  {% else %}
  <p class="leading-tight">
    Füge ein weiteres Wort zu Deiner Liste hinzu:
  </p>
  {% endif %}
  {{ render_form(form, show_labels=False) }}
</div>

{% if items %}
<div class="mt-8">
  <p class="leading-tight">
    Hier ist eine Liste der Wörter, die Du bereits eingegeben hast:
  </p>
  <ul class="-m-2 mt-2 flex flex-wrap justify-between">
    {% for item in items %}
    <li class=" m-2 py-2 px-4 flex flex-col flex-grow bg-gray-100 rounded-lg">
      <p class="pb-1 border-b border-gray-300 text-center text-lg text-indigo-700">
        {{ item.word }}
      </p>
      <div class="flex flex-col items-center -mx-1 mt-1 text-sm text-gray-600">
        <div class="flex">
          <p class="mx-1">
            <span class="italic">N</span>
            <span class="font-semibold">{{ item.repitition_number }}</span>
          </p>
          <p class="mx-1">
            <span class="italic">E</span>
            <span class="font-semibold">{{ "{:.3}".format(item.easiness_factor) }}</span>
          </p>
        </div>
        {% if item.last_learned %}
        <p class="mx-1">
          <span class="italic">L</span>
          <span class="font-semibold" moment-format="fromNow">{{ item.last_learned }}</span>
        </p>
        {% endif %}
        {% if item.next_iteration %}
        <p class="mx-1">
          <span class="italic">W</span>
          <span class="font-semibold" moment-format="fromNow">{{ item.next_iteration }}</span>
        </p>
        {% endif %}
      </div>
    </li>
    {% endfor %}
  </ul>
</div>
{% endif %}

{% endblock %}
